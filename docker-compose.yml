version: '3.8'

services:
  # Servicio de desarrollo
  app-dev:
    build:
      context: .
      dockerfile: Dockerfile.dev
    container_name: cotizador-dev
    ports:
      - "3000:3000"
    volumes:
      - .:/app
      - /app/node_modules
      - /app/.next
    env_file:
      - .env.local
    command: npm run dev
    restart: unless-stopped
    networks:
      - cotizador-network

  # Servicio de producción
  app-prod:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: cotizador-prod
    ports:
      - "3000:3000"
    # Nota: env_file comentado porque Easypanel inyecta las variables directamente
    # Las variables de entorno se configuran en el panel de Easypanel
    # env_file:
    #   - .env.local
    restart: unless-stopped
    # Networks: Easypanel maneja la red automáticamente, no es necesario definirla
    # networks:
    #   - cotizador-network

# Networks: Easypanel maneja las redes automáticamente
# networks:
#   cotizador-network:
#     driver: bridge

